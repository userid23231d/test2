name: Deployment

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Use curl
        uses: sozo-design/curl@v1.0.2
      - run: curl icanhazip.com
        id: get-ip
      - name: Get public IP
        run: | 
          my_public_ip=$(curl -s icanhazip.com)
          echo "ORIGIN=$my_public_ip" >> $GITHUB_ENV
      - uses: LuisEnMarroquin/setup-ssh-action@v2.0.0
        with:
          run: my_public_ip=$(curl -s icanhazip.com)
                        
          ORIGIN: ${{ env.ORIGIN }}
  
          SSHKEY: ${{ secrets.SSH }} # ----- BEGIN RSA PRIVATE KEY----- ...
          NAME: production
          PORT: 22
          USER: admin # admin
      - run: ssh production ls --help
 
